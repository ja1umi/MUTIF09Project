*	ECHOBACK TEST
*	BY POLLING
*
*	ADDRESS
ACIACS	EQU	$B000
ACIADA	EQU	$B001
STACK	EQU	$7FFF
	ORG	$E000
*
*	POWER ON SEQUENCE
START	LDS	#STACK
*
*	ACIA INITIALIZE
	LDA	#$03
	STA	ACIACS
*	LDA	#$15
	LDA	#$95
	STA	ACIACS
*
*	ECHOBACK TEST
*	LDX	#MESG
	LEAX MESG,PCR
	BSR	PDATA
LOOP	BSR	INCH
	BSR	OUTCH
	BRA	LOOP
*
*	INPUT CHAR
INCH	LDA	ACIACS
	ASRA
	BCC	INCH
	LDA	ACIADA
	RTS
*
*	OUTPUT CHAR
OUTCH	LDB	ACIACS
	ASRB
	ASRB
	BCC	OUTCH
	STA	ACIADA
	RTS
*
*	OUTPUT STRING
PDATA	LDA	,X+
	BEQ	EXIT
	BSR	OUTCH
*	LEAX 1,X
	BRA	PDATA
EXIT	RTS
*
*	MESSAGE
MESG	FCB	$0D,$0A
	FCC	"[MUTIF09] 6809 Single Board Computer "
	FCC	"Echoback test in progress"
	FCB	$0D,$0A
	FCB	$00
*
*	VECTOR
UUINT	RTI
	ORG	$FFF8
	FDB	UUINT
	FDB	UUINT
	FDB	UUINT
	FDB	START
	END
